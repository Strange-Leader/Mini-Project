# MiniProject: Two-Pass Assembler and Emulator

## Description
This project implements a two-pass assembler and a CPU emulator for a custom assembly language. The assembler translates assembly code into machine code, while the emulator executes the generated machine code. The project includes various test cases to validate the functionality of the assembler and emulator.

## Features
- **Assembler**:
  - Two-pass assembly process.
  - Generates machine code (`.o`), listing files (`.txt`), and error logs (`.log`).
  - Supports a variety of mnemonics and operand types.
  - Handles labels, immediate values, and memory offsets.
  - Detects and logs errors such as duplicate labels, unknown mnemonics, and invalid operands.

- **Emulator**:
  - Simulates a CPU with registers (`A`, `B`, `PC`, `SP`) and memory.
  - Executes machine code generated by the assembler.
  - Supports debugging commands like `step`, `run`, `registers`, and `memory`.

- **Test Cases**:
  - Includes multiple test assembly programs (e.g., bubble sort, arithmetic operations, subroutine calls).
  - Validates assembler and emulator functionality with various scenarios.

## Technologies Used
- **Programming Language**: C++ (with C++11 features)
- **Development Tools**: GCC compiler
- **File Formats**: `.asm` (assembly source), `.o` (machine code), `.txt` (listing), `.log` (error logs)

## File Structure
- `asm.cpp`: Source code for the assembler.
- `emu.cpp`: Source code for the emulator.
- `bubble.asm`: Bubble sort program in assembly.
- `test*.asm`: Test assembly programs for various scenarios.
- `claims.txt`: Declaration of authorship and project details.
- `README.md`: Project documentation (this file).

## Installation
1. Clone the repository:
   ```bash
   git clone <repository-url>
   cd miniproject
   ```
2. Compile the assembler and emulator:
   ```bash
   g++ -std=c++11 -Wall -Wextra -pedantic asm.cpp -o asm
   g++ -std=c++11 -Wall -Wextra -pedantic emu.cpp -o emu
   ```

## Usage
### Assembler
1. Run the assembler with an assembly file:
   ```bash
   ./asm <filename>.asm
   ```
2. Outputs:
   - `<filename>.o`: Machine code file.
   - `<filename>.txt`: Listing file.
   - `<filename>.log`: Error log file (if errors are found).

### Emulator
1. Load and execute a machine code file:
   ```bash
   ./emu
   ```
2. Available commands:
   - `load <filename>.o`: Load a machine code file.
   - `run`: Run the program until HALT.
   - `step`: Execute one instruction.
   - `registers`: Display register contents.
   - `memory <addr> <count>`: Display memory contents.
   - `reset`: Reset the CPU.
   - `quit`: Exit the emulator.

## Testing
The project includes several test cases:
- **Bubble Sort**: `bubble.asm`
- **Arithmetic Operations**: `test5.asm`
- **Shift Operations**: `test6.asm`, `test7.asm`
- **Subroutine Calls**: `test9.asm`
- **Error Handling**: `test2.asm`, `test3.asm`

Each test generates corresponding `.o`, `.txt`, and `.log` files.

## Assumptions
- The `data` mnemonic is always used at the end of assembly code.
- Listing and object files are generated only if there are no errors in the assembly code.

